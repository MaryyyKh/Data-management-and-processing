<?php
// Имя файла, из которого нужно прочитать данные
$filename = "students.txt";

// Добавляем 4 новые записи в файл
$newEntries = array(
    "\nФИО: Александрова Елена Игоревна; Год рождения: 2005; Год выпуска: 2023; Нуждается в общежитии: Да; Оценки в аттестате: math - 5, rus - 5, phys - 5, bio - 5, eng - 5; Оценки за вступительные экзамены: math - 5, rus - 5, chem - 3\n",
    "ФИО: Шаров Иван Андреевич; Год рождения: 2004; Год выпуска: 2022; Нуждается в общежитии: Нет; Оценки в аттестате: math - 4, rus - 4, phys - 4, bio - 4, eng - 4; Оценки за вступительные экзамены: math - 3, rus - 4, chem - 4\n",
    "ФИО: Рождественский Антон Сидорович; Год рождения: 2003; Год выпуска: 2021; Нуждается в общежитии: Да; Оценки в аттестате: math - 5, rus - 4, phys - 5, bio - 4, eng - 5; Оценки за вступительные экзамены: math - 4, rus - 5, chem - 5\n",
    "ФИО: Сорокалетний Кузьма Иванович; Год рождения: 2002; Год выпуска: 2020; Нуждается в общежитии: Нет; Оценки в аттестате: math - 4, rus - 3, phys - 5, bio - 4, eng - 4; Оценки за вступительные экзамены: math - 5, rus - 4, chem - 5\n"
);

// Добавляем новые записи в файл
file_put_contents($filename, $newEntries, FILE_APPEND);

// Читаем содержимое файла в массив строк
$lines = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

// Выводим содержимое файла
echo nl2br("Содержимое файла:\n");
foreach ($lines as $line) {
    echo nl2br($line . "\n");
}

// Выводим список абитуриентов, получивших на вступительных экзаменах одну оценку 3
echo nl2br("\nСписок абитуриентов, получивших на вступительных экзаменах одну оценку 3:\n");
foreach ($lines as $line) {
    if (strpos($line, "Оценки за вступительные экзамены:") !== false) {
        $grades = explode(", ", substr($line, strpos($line, "Оценки за вступительные экзамены:") + strlen("Оценки за вступительные экзамены:")));
        $count = 0;
        foreach ($grades as $grade) {
            if (strpos($grade, '3') !== false) {
                $count++;
            }
        }
        if ($count === 1) {
            echo nl2br($line . "\n");
        }
    }
}
?>
